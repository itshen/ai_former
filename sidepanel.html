<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>智能表单填充助手</title>
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            width: 100%;
            min-height: 100vh;
            padding: 12px;
            background-color: #f8f9fa;
            margin: 0;
            box-sizing: border-box;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        h1 {
            font-size: 16px;
            color: #333;
            margin: 0 0 12px 0;
            text-align: center;
        }
        .section {
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #444;
        }
        label {
            display: block;
            margin-bottom: 4px;
            font-size: 12px;
            color: #555;
        }
        input[type="text"], select, textarea {
            width: 100%;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 8px;
            font-size: 12px;
        }
        textarea {
            height: 80px;
            resize: vertical;
        }
        button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 7px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            width: 100%;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #3367d6;
        }
        button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        .radio-group {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        .radio-option {
            display: flex;
            align-items: center;
        }
        .radio-option input {
            margin-right: 4px;
        }
        .status {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        
        /* 加载指示器样式 */
        .loading-indicator {
            display: none;
            position: relative;
            width: 100%;
            height: 3px;
            overflow: hidden;
            margin-top: 8px;
            background-color: #f1f1f1;
            border-radius: 2px;
        }
        .loading-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 30%;
            background-color: #4285f4;
            animation: loading 1.5s infinite ease-in-out;
            border-radius: 2px;
        }
        @keyframes loading {
            0% {
                left: -30%;
            }
            100% {
                left: 100%;
            }
        }
        .loading-indicator.active {
            display: block;
        }
        
        /* 紧凑布局 */
        .compact-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .compact-row > div {
            flex: 1;
        }
        .compact-row label {
            margin-bottom: 2px;
        }
        .shortcut-tip {
            text-align: right;
            margin-top: -6px;
            margin-bottom: 6px;
            font-size: 11px;
            color: #666;
        }
        
        /* 侧边栏特定样式 */
        @media (min-width: 300px) {
            body {
                padding: 16px;
            }
            
            textarea {
                height: 120px;
            }
            
            .section {
                margin-bottom: 16px;
            }
        }
        
        /* 主要内容区域 */
        .main-content {
            flex: 1;
        }
        
        /* 二维码样式 */
        .qrcode-container {
            text-align: center;
            margin-top: auto;
            padding-top: 16px;
            padding-bottom: 16px;
        }
        .qrcode-image {
            max-width: 100%;
            width: 300px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="main-content">
        <h1>智能表单填充助手</h1>
        
        <div class="section">
            <div class="section-title">模型配置</div>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="ollama" name="model-type" value="ollama" checked>
                    <label for="ollama">Ollama (本地)</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="qianwen" name="model-type" value="qianwen">
                    <label for="qianwen">通义千问 API</label>
                </div>
            </div>
            
            <div id="ollama-config">
                <div class="compact-row">
                    <div>
                        <label for="ollama-url">Ollama 地址:</label>
                        <input type="text" id="ollama-url" placeholder="http://localhost:11434" value="http://localhost:11434">
                    </div>
                    <div>
                        <label for="ollama-model">Ollama 模型:</label>
                        <select id="ollama-model">
                            <option value="loading">正在加载...</option>
                        </select>
                    </div>
                </div>
                
                <div id="custom-model-container" class="hidden">
                    <label for="custom-model-name">自定义模型名称:</label>
                    <input type="text" id="custom-model-name" placeholder="输入模型名称">
                </div>
            </div>
            
            <div id="qianwen-config" class="hidden">
                <div class="compact-row">
                    <div>
                        <label for="qianwen-api-key">API Key:</label>
                        <input type="text" id="qianwen-api-key" placeholder="输入您的API Key">
                    </div>
                    <div>
                        <label for="qianwen-model">模型:</label>
                        <select id="qianwen-model">
                            <option value="qwen-plus">千问-Plus</option>
                            <option value="qwen-max">千问-Max</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">表单填充</div>
            <label for="user-prompt">请输入您的要求:</label>
            <textarea id="user-prompt" placeholder="例如：请帮我填写个人信息，我是30岁的软件工程师"></textarea>
            <div class="shortcut-tip">
                提示: 按 Ctrl+Enter 快速识别并填充表单
            </div>
            
            <button id="fill-form" title="快捷键: Ctrl+Enter">智能识别并填充表单</button>
            <div style="display: flex; margin-top: 8px; gap: 8px;">
                <button id="extract-form" style="flex: 1; background-color: #34a853;">识别表单</button>
                <button id="remove-highlights" style="flex: 1; background-color: #ea4335;">清除识别</button>
            </div>
            
            <!-- 加载指示器 -->
            <div id="loading-indicator" class="loading-indicator"></div>
            
            <div id="status" class="status"></div>
        </div>
    </div>
    
    <!-- 二维码区域 -->
    <div class="qrcode-container">
        <img src="qrcode.png" alt="扫码关注" class="qrcode-image">
    </div>
    
    <script src="sidepanel.js"></script>
</body>
</html> 